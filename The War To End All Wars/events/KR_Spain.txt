###########################
# Spain Events
###########################
# By ~mw~
###########################

add_namespace = sprd
add_namespace = sprf
add_namespace = sprc

# For whoever will be doing spain the volunteer and seize spanish africa events for NFA are already handled in its focus trees
# and we will have to agree on how to do the Med faction and KoS joining Entente

#Events affecting other countries are under 'Foreign Policy'

# Introduction event
country_event = {
	id = sprd.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.1"}
	title = sprd.1.t
	desc = sprd.1.d
	picture = SPA_alfonso_xiii

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1936.01.01
	}

	option = {
		name = sprd.1.a
		add_stability = -0.30
	}
}

# Black Monday hits Spain
country_event = {
	id = sprd.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.2"}
	title = sprd.2.t
	desc = sprd.2.d
	picture = NOR_black_monday

	is_triggered_only = yes

	option = {
		name = sprd.2.a
		add_stability = -0.10
		add_ideas = SPR_black_monday
	}
}

# Social breakdown
country_event = {
	id = sprd.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.3"}
	title = sprd.3.t
	desc = sprd.3.d
	picture = GFX_report_event_generic_riot

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_stability < 0
		has_idea = SPR_black_monday
		NOT = { has_country_flag = aftermath_of_the_civil_war }
	}

	mean_time_to_happen = {
		months = 2
	}

	option = {
		name = sprd.3.a
		add_stability = -0.20
		if = {
			limit = { NOT = { has_global_flag = SPR_cntfai_have_risen } }
			set_country_flag = SPR_cntfai_will_rise
		}
		if = {
			limit = { NOT = { has_global_flag = SPR_carlists_have_risen } }
			set_country_flag = SPR_carlists_will_rise
		}
	}
}

### Carlist Event Chains

# Alfonso Carlos de Borbon dies
country_event = {
	id = sprd.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.4"}
	title = sprd.4.t
	desc = sprd.4.d
	picture = GFX_report_event_europe_funeral

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1936.01.10
		NOT = { has_country_flag = alfonso_carlos_dead }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = sprd.4.a
		add_stability = -0.02
		set_country_flag = alfonso_carlos_dead
	}
}

# Javier gives another speech
country_event = {
	id = sprd.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.8"}
	title = sprd.8.t
	desc = sprd.8.d
	picture = GFX_report_event_SPR_javier

	fire_only_once = yes

	trigger = {
		tag = SPR
		NOT = { has_war_with = CAR }
		NOT = { country_exists = CAR }
	}

	mean_time_to_happen = {
		days = 10
	}

	option = {
		name = sprd.8.a #Time to ban his organisation
		ai_chance = { factor = 25 }
		custom_effect_tooltip = SPR_ban_carlists
		add_stability = -0.20
		set_country_flag = SPR_carlists_will_rise
		set_country_flag = SPR_javier_banned
	}
	option = {
		name = sprd.8.b #Arrest Javier and his followers!
		ai_chance = { factor = 25 }
		custom_effect_tooltip = SPR_arrest_javier
		add_stability = -0.10
		set_country_flag = SPR_carlists_will_rise
		set_country_flag = SPR_javier_arrested
	}
	option = {
		name = sprd.8.c #Praise his efforts
		ai_chance = { factor = 25 }
		custom_effect_tooltip = SPR_encourage_javier
		add_political_power = -100
		add_stability = -0.02
		set_country_flag = SPR_javier_praised
	}
	option = {
		name = sprd.8.e #Ignore the pretender
		ai_chance = { factor = 25 }
		add_political_power = -50
		add_stability = -0.04
		set_country_flag = SPR_javier_ignored
	}
}

# Carlist bombing
country_event = {
	id = sprd.9
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.9"}
	title = sprd.9.t
	desc = sprd.9.d
	picture = GFX_report_event_IRE_bombing

	trigger = {
		tag = SPR
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_arrested
			has_country_flag = SPR_javier_ignored
		}
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 6
		modifier = {
			factor = 1.5
			has_country_flag = SPR_javier_ignored
		}
	}

	option = {
		name = sprd.9.a
		add_stability = -0.02
	}
}

# Carlist Demonstrations
country_event = {
	id = sprd.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.10"}
	title = sprd.10.t
	desc = sprd.10.d
	picture = GFX_report_event_gathering_protest

	trigger = {
		tag = SPR
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_ignored
		}
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 6
		modifier = {
			factor = 1.5
			has_country_flag = SPR_javier_ignored
		}
	}

	option = {
		name = sprd.10.a
		add_stability = -0.05
	}
}

# Assassination of Miguel Ponte Manso de Zuniga
country_event = {
	id = sprd.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.11"}
	title = sprd.11.t
	desc = sprd.11.d
	picture = GFX_report_event_generic_funeral

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_idea = SPR_Miguel_Ponte_Manso_de_Zuniga_sec_ade
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_arrested
			has_country_flag = SPR_cntfai_disband
			has_country_flag = SPR_cntfai_arrest
		}
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		name = sprd.11.a
		add_stability = -0.05
		remove_ideas = SPR_Miguel_Ponte_Manso_de_Zuniga_sec_ade
		set_country_flag = Miguel_Ponte_Manso_de_Zuniga_dead
	}
}

# Assassination of Jose Ungria Jimenez
country_event = {
	id = sprd.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.12"}
	title = sprd.12.t
	desc = sprd.12.d
	picture = GFX_report_event_generic_funeral

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_idea = SPR_Jose_Ungria_Jimenez_int_ade
		OR = {
			has_country_flag = SPR_javier_banned
			has_country_flag = SPR_javier_arrested
			has_country_flag = SPR_cntfai_disband
			has_country_flag = SPR_cntfai_arrest
		}
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		name = sprd.12.a
		add_stability = -0.05
		remove_ideas = SPR_Jose_Ungria_Jimenez_int_ade
		set_country_flag = Jose_Ungria_Jimenez_dead
	}
}

### CNT-FAI event chains

# The CNT-FAI speech
country_event = {
	id = sprd.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.13"}
	title = sprd.13.t
	desc = sprd.13.d
	picture = SPA_CNT_FAI

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1936.02.27
		has_idea = SPR_black_monday
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprd.13.a #Ban the organisation of workers
		custom_effect_tooltip = SPR_ban_cntfai
		add_political_power = -100
		add_stability = -0.05
		set_country_flag = SPR_cntfai_banned
		add_popularity = { ideology = social_liberal popularity = -0.03 }
	}
	option = {
		name = sprd.13.b #Arrest the leaders of the movement
		custom_effect_tooltip = SPR_arrest_cntfai
		add_stability = -0.10
		set_country_flag = SPR_cntfai_arrest
		set_country_flag = SPR_cntfai_will_rise
		add_popularity = { ideology = social_conservative popularity = -0.03 }
		add_popularity = { ideology = social_liberal popularity = -0.03 }
		add_popularity = { ideology = radical_socialist popularity = -0.03 }
		add_popularity = { ideology = syndicalist popularity = -0.03 }
	}
	option = {
		name = sprd.13.c #Forcefully disband the movement
		custom_effect_tooltip = SPR_force_cntfai
		add_stability = -0.20
		set_country_flag = SPR_cntfai_disband
		set_country_flag = SPR_cntfai_will_rise
		add_popularity = { ideology = social_conservative popularity = -0.05 }
		add_popularity = { ideology = social_liberal popularity = -0.05 }
		add_popularity = { ideology = radical_socialist popularity = -0.03 }
		add_popularity = { ideology = syndicalist popularity = -0.03 }
	}
	option = {
		name = sprd.13.e #Allow this to happen
		custom_effect_tooltip = SPR_allow_cntfai
		add_political_power = -200
		set_country_flag = SPR_cntfai_allowed
		add_popularity = { ideology = social_conservative popularity = 0.03 }
		add_popularity = { ideology = radical_socialist popularity = 0.03 }
		add_popularity = { ideology = syndicalist popularity = 0.03 }
	}
}

# CNT-FAI Protests
country_event = {
	id = sprd.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.14"}
	title = sprd.14.t
	desc = sprd.14.d
	picture = GFX_report_event_gathering_protest

	fire_only_once = yes

	trigger = {
		tag = SPR
		OR = {
			has_country_flag = SPR_cntfai_banned
			has_country_flag = SPR_cntfai_arrest
		}
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprd.14.a
		add_stability = -0.05
	}
}

# National CNT-FAI Protests
country_event = {
	id = sprd.15
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.15"}
	title = sprd.15.t
	desc = sprd.15.d
	picture = GFX_report_event_gathering_protest

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_cntfai_banned
		date > 1936.3.10
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprd.15.a #Send out the police!
		add_stability = -0.10
	}
	option = {
		name = sprd.15.b #Allow them to organise
		custom_effect_tooltip = SPR_allow_cntfai
		set_country_flag = SPR_cntfai_allowed
		clr_country_flag = SPR_cntfai_banned
		add_popularity = { ideology = social_conservative popularity = 0.03 }
		add_popularity = { ideology = radical_socialist popularity = 0.03 }
		add_popularity = { ideology = syndicalist popularity = 0.03 }
	}
}

# Arresting the CNT-FAI
country_event = {
	id = sprd.16
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.16"}
	title = sprd.16.t
	desc = sprd.16.d
	picture = HOL_zwolle_riots

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_cntfai_arrest
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprd.16.a #Find the rat and establish a secret police!
		trigger = { NOT = { has_idea = SPR_Tomas_Conde_de_Redezno_sec_pau } }
		ai_chance = { factor = 85 }
		add_stability = 0.05
		remove_ideas_with_trait = security_minister
		add_ideas = SPR_Tomas_Conde_de_Redezno_sec_pau
		set_country_flag = SPR_cntfai_fled
	}
	option = {
		name = sprd.16.b #We knew this would happen
		ai_chance = { factor = 15 }
		add_stability = -0.05
		set_country_flag = SPR_cntfai_fled
	}
}

# Forcefully Disbanding the CNT-FAI
country_event = {
	id = sprd.17
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.17"}
	title = sprd.17.t
	desc = sprd.17.d
	picture = HOL_zwolle_riots

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_cntfai_disband
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprd.17.a
		add_stability = 0.05
		set_country_flag = SPR_cntfai_fled
	}
}

# CNT-FAI organising the workers
country_event = {
	id = sprd.18
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.18"}
	title = sprd.18.t
	desc = sprd.18.d
	picture = SPA_CNT_FAI

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_cntfai_allowed
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = sprd.18.a
		add_stability = 0.02
		set_country_flag = SPR_cntfai_organising
	}
}

# CNT-FAI Plan South commenced
country_event = {
	id = sprd.19
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.19"}
	title = sprd.19.t
	desc = sprd.19.d
	picture = economic_policy

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_cntfai_allowed
		has_country_flag = SPR_cntfai_organising
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = sprd.19.a
		add_stability = 0.05
		set_country_flag = SPR_cntfai_plan_south
	}
}

# CNT-FAI Plan South completed
country_event = {
	id = sprd.20
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.20"}
	title = sprd.20.t
	desc = sprd.20.d
	picture = economic_policy

	fire_only_once = yes

	trigger = {
		tag = SPR
		OR = {
			owns_state = 173
			owns_state = 168
		}
		has_country_flag = SPR_cntfai_allowed
		has_country_flag = SPR_cntfai_organising
		has_country_flag = SPR_cntfai_plan_south
		NOT = { has_global_flag = spanish_civil_war }
		NOT = { has_country_flag = aftermath_of_the_civil_war }
		NOT = { has_country_flag = election_success }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = sprd.20.a
		if = {
			limit = { owns_state = 173 }
			173 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = steel
					amount = 4
				}
			}
		}
		if = {
			limit = { owns_state = 168 }
			168 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

### Election event chains

# King Alfonso has a stroke
country_event = {
	id = sprd.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.21"}
	title = sprd.21.t
	desc = sprd.21.d
	picture = SPA_alfonso_xiii

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1937.1.1
		NOT = {
			has_country_flag = aftermath_of_the_civil_war
			country_exists = CNT
			country_exists = CAR
		}
	}

	mean_time_to_happen = {
		months = 5
		modifier = {
			factor = 0.5
			has_country_flag = SPR_cntfai_will_rise
		}
		modifier = {
			factor = 0.5
			has_country_flag = SPR_carlists_will_rise
		}
	}

	option = {
		name = sprd.21.a
		set_country_flag = SPR_alfonso_coma
		add_political_power = -100
		add_stability = -0.10
		hidden_effect = {
			country_event = { id = sprd.22 days = 10 }
		}
	}
}

# King Alfonso is in a coma
country_event = {
	id = sprd.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.22"}
	title = sprd.22.t
	desc = sprd.22.d
	picture = SPA_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.22.a #Call for open elections
		ai_chance = { factor = 20 }
		custom_effect_tooltip = SPR_free_elections
		set_country_flag = SPR_elections
	}
	option = {
		name = sprd.22.b #Call for elections, but with only selected parties
		ai_chance = { factor = 40 }
		custom_effect_tooltip = SPR_rig_elections
		set_country_flag = SPR_rigged_elections
	}
	option = {
		name = sprd.22.c #The King is not dead! Do nothing!
		ai_chance = { factor = 40 }
		add_stability = -0.10
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
}

# Free elections are held
country_event = {
	id = sprd.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.23"}
	title = sprd.23.t
	desc = sprd.23.d
	picture = GFX_report_event_election_vote

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_elections
		NOT = {
			has_country_flag = aftermath_of_the_civil_war
			has_war_with = CNT
			has_war_with = CAR
		}
	}

	mean_time_to_happen = {
		days = 2
	}

	immediate = {
		clr_country_flag = SPR_elections
	}

	option = {
		name = sprd.23.a
		random_list = {
			40 = {
				custom_effect_tooltip = SPR_ruling_party_wins
				hidden_effect = { country_event = { id = sprd.34 hours = 5 } }
			}
			30 = {
				custom_effect_tooltip = SPR_CNT_wins
				hidden_effect = { country_event = { id = sprd.35 hours = 5 } }
			}
			30 = {
				custom_effect_tooltip = SPR_CAR_wins
				hidden_effect = { country_event = { id = sprd.36 hours = 5 } }
			}
		}
	}
}

# Elections cancelled due to war
country_event = {
	id = sprd.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.24"}
	title = sprd.24.t
	desc = sprd.24.d
	picture = GFX_report_event_election_vote

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_elections
		OR = {
			has_war_with = CAR
			has_war_with = CNT
		}
	}

	mean_time_to_happen = {
		days = 5
	}

	option = {
		name = sprd.24.a
		clr_country_flag = SPR_elections
		add_stability = -0.10
	}
}

# Election riots
country_event = {
	id = sprd.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.25"}
	title = sprd.25.t
	desc = sprd.25.d
	picture = GFX_report_event_gathering_protest

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_country_flag = SPR_rigged_elections
		NOT = {
			has_country_flag = aftermath_of_the_civil_war
			has_war_with = CNT
			has_war_with = CAR
		}
	}

	mean_time_to_happen = { days = 90 }

	option = {
		name = sprd.25.a #Call off the election - Martial Law is declared
		ai_chance = { factor = 75 }
		custom_effect_tooltip = SPR_cancel_election
		add_political_power = -200
		add_stability = 0.10
		clr_country_flag = SPR_rigged_elections
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
	option = {
		name = sprd.25.b #Nothing will stop this election
		ai_chance = { factor = 25 }
		add_stability = -0.10
		hidden_effect = {
			country_event = { id = sprd.26 days = 1 }
		}
	}
}

# Election day disaster
country_event = {
	id = sprd.26
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.26"}
	title = sprd.26.t
	desc = sprd.26.d
	picture = GFX_report_event_generic_riot

	is_triggered_only = yes

	trigger = {
		NOT = {
			has_war_with = CNT
			has_war_with = CAR
		}
	}

	option = {
		name = sprd.26.a
		clr_country_flag = SPR_rigged_elections
		add_stability = -0.10
		add_manpower = -10000
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = SPR_carlists_will_rise
	}
}

### POST-WAR EVENTS

# Replacing the king - Juan not assassinated
country_event = {
	id = sprd.27
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.27"}
	title = sprd.27.t
	desc = sprd.27.d
	picture = SPA_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.27.a #Name him as Alfonso's successor
		ai_chance = { factor = 80 }
		add_political_power = 40
		create_country_leader = {
			name = "Juan III"
			desc = "POLITICS_JUAN_BOURBON_DESC"
			picture = "Portrait_SPR_Juan_III.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		add_popularity = { ideology = authoritarian_democrat popularity = 0.1 }
	}
	option = {
		name = sprd.27.b #No, the time of the kingdom is over
		ai_chance = { factor = 20 }
		add_political_power = -100
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "Portrait_SPR_Franco_Bahamonde.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		custom_effect_tooltip = SPR_become_republic
		set_cosmetic_tag = SPR_republic
		hidden_effect = { remove_ideas_with_trait = head_of_government }
		add_ideas = SPR_Francisco_Franco_Bahamonde_hog_ade
	}
}

# Replacing the king - Juan assassinated
country_event = {
	id = sprd.28
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.28"}
	title = sprd.28.t
	desc = sprd.28.d
	picture = SPA_alfonso_xiii

	is_triggered_only = yes

	option = {
		name = sprd.27.a #Name him as Alfonso's successor
		ai_chance = { factor = 60 }
		add_political_power = 40
		create_country_leader = {
			name = "Jaime I"
			desc = "POLITICS_JAIME_BOURBON_DESC"
			picture = "Portrait_SPR_Jaime_I.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		add_popularity = { ideology = authoritarian_democrat popularity = 0.1 }
	}
	option = {
		name = sprd.27.b #No, the time of the kingdom is over
		ai_chance = { factor = 40 }
		add_political_power = -100
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "Portrait_SPR_Franco_Bahamonde.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		custom_effect_tooltip = SPR_become_republic
		set_cosmetic_tag = SPR_republic
		hidden_effect = { remove_ideas_with_trait = head_of_government }
		add_ideas = SPR_Francisco_Franco_Bahamonde_hog_ade
	}
}

# Spain asks to join the Reichspakt
country_event = {
	id = sprd.30
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.30"}
	title = sprd.30.t
	desc = sprd.30.d
	picture = diplomacy4

	is_triggered_only = yes

	option = {
		name = sprd.30.a #Absolutely, they are welcome
		ai_chance = { factor = 95 }
		add_political_power = 140
		effect_tooltip = { add_to_faction = SPR }
		SPR = { country_event = { id = sprd.32 hours = 5 } }
	}
	option = {
		name = sprd.30.b #It's not a good idea
		ai_chance = { factor = 5 }
		add_political_power = -20
		SPR = { country_event = { id = sprd.33 hours = 5 } }
	}
}

# Spain asks to join the Entente
country_event = {
	id = sprd.31
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.31"}
	title = sprd.31.t
	desc = sprd.31.d
	picture = diplomacy4

	is_triggered_only = yes

	trigger = {
		is_faction_leader = yes
		FROM = {
			exists = yes
			is_in_faction = no
		}
	}

	option = {
		name = sprd.30.a #Absolutely, they are welcome
		ai_chance = { factor = 99 }
		effect_tooltip = { add_to_faction = FROM }
		FROM = { country_event = { id = sprd.32 hours = 5 } }
	}
	option = {
		name = sprd.30.b #It's not a good idea
		ai_chance = { factor = 1 }
		add_political_power = -20
		FROM = { country_event = { id = sprd.33 hours = 5 } }
	}
}

# Spain admitted to faction
country_event = {
	id = sprd.32
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.32"}
	title = sprd.32.t
	desc = sprd.32.d
	picture = diplomacy3

	is_triggered_only = yes

	trigger = {
		is_in_faction = no
		FROM = {
			exists = yes
			is_faction_leader = yes
		}
	}

	option = {
		name = sprd.32.a
		add_political_power = 60
		FROM = { add_to_faction = ROOT }
	}
}

# Spain is turned down
country_event = {
	id = sprd.33
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.33"}
	title = sprd.33.t
	desc = sprd.33.d
	picture = GFX_report_event_worried_french

	is_triggered_only = yes

	option = {
		name = sprd.33.a
		add_political_power = -20
	}
}

# The ruling party wins the elections
country_event = {
	id = sprd.34
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.34"}
	title = sprd.34.t
	desc = sprd.34.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.34.a
		add_stability = 0.10
		add_popularity = { ideology = social_conservative popularity = 0.2 }
		set_country_flag = election_success
		clr_country_flag = SPR_carlists_will_rise
		clr_country_flag = SPR_cntfai_will_rise
		hidden_effect = {
			news_event = { id = worldnews.85 days = 1 }
		}
	}
}

# The CNT-FAI wins the elections
country_event = {
	id = sprd.35
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.35"}
	title = sprd.35.t
	desc = sprd.35.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.35.a #We will abide by the result
		ai_chance = { factor = 30 }
		custom_effect_tooltip = SPR_become_CNT
		hidden_effect = {
			if = {
				limit = { has_idea = SPR_black_monday }
				set_global_flag = SPR_black_monday
			}
			if = {
				limit = { has_idea = SPR_social_breakdown }
				set_global_flag = SPR_social_breakdown
			}
			if = {
				limit = { has_idea = SPR_social_breakdown_2 }
				set_global_flag = SPR_social_breakdown_2
			}
			if = {
				limit = { has_idea = SPR_social_breakdown_3 }
				set_global_flag = SPR_social_breakdown_3
			}
			every_state = {
				limit = { is_core_of = SPR }
				add_core_of = CNT
			}
			every_state = {
				limit = { is_claimed_by = SPR }
				remove_claim_by = SPR
				add_claim_by = CNT
			}
			random_owned_controlled_state = {
				CNT = { transfer_state = PREV }
			}
			CNT = {
				annex_country = { target = SPR transfer_troops = yes }
				set_country_flag = election_success
				add_stability = 0.10
				transfer_technology = yes
				if = {
					limit = { has_global_flag = SPR_black_monday }
					clr_global_flag = SPR_black_monday
					add_ideas = SPR_black_monday
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown }
					clr_global_flag = SPR_social_breakdown
					add_ideas = SPR_social_breakdown
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown_2 }
					clr_global_flag = SPR_social_breakdown_2
					add_ideas = SPR_social_breakdown_2
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown_3 }
					clr_global_flag = SPR_social_breakdown_3
					add_ideas = SPR_social_breakdown_3
				}
				change_tag_from = SPR
				news_event = { id = worldnews.85 days = 1 }
			}
		}
	}
	option = {
		name = sprd.35.b #Never! Invalidate the elections!
		ai_chance = { factor = 70 }
		add_political_power = -200
		add_stability = -0.10
		set_country_flag = SPR_cntfai_will_rise
	}
}

# The Carlists win the elections
country_event = {
	id = sprd.36
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprd.36"}
	title = sprd.36.t
	desc = sprd.36.d
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	option = {
		name = sprd.35.a #We will abide by the result
		ai_chance = { factor = 50 }
		custom_effect_tooltip = SPR_become_CAR
		hidden_effect = {
			if = {
				limit = { ITA = { has_idea = ITA_spanish_economic_cooperation } }
				set_global_flag = SPR_italian_economic_cooperation
			}
			if = {
				limit = { POR = { has_idea = POR_spanish_economic_cooperation } }
				set_global_flag = SPR_portuguese_economic_cooperation
			}
			if = {
				limit = { has_idea = SPR_black_monday }
				set_global_flag = CAR_black_monday
			}
			if = {
				limit = { has_idea = SPR_social_breakdown }
				set_global_flag = SPR_social_breakdown
			}
			if = {
				limit = { has_idea = SPR_social_breakdown_2 }
				set_global_flag = SPR_social_breakdown_2
			}
			if = {
				limit = { has_idea = SPR_social_breakdown_3 }
				set_global_flag = SPR_social_breakdown_3
			}
			every_state = {
				limit = { is_core_of = SPR }
				remove_core_of = SPR
				add_core_of = CAR
			}
			every_state = {
				limit = { is_claimed_by = SPR }
				remove_claim_by = SPR
				add_claim_by = CAR
			}
			random_owned_controlled_state = {
				CAR = { transfer_state = PREV }
			}
			CAR = {
				annex_country = { target = SPR transfer_troops = yes }
				set_country_flag = election_success
				add_stability = 0.10
				transfer_technology = yes
				if = {
					limit = { has_global_flag = SPR_italian_economic_cooperation }
					clr_global_flag = SPR_italian_economic_cooperation
					add_ideas = SPR_italian_economic_cooperation
				}
				if = {
					limit = { has_global_flag = SPR_portuguese_economic_cooperation }
					clr_global_flag = SPR_portuguese_economic_cooperation
					add_ideas = SPR_portuguese_economic_cooperation
				}
				if = {
					limit = { has_global_flag = CAR_black_monday }
					clr_global_flag = CAR_black_monday
					add_ideas = CAR_black_monday
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown }
					clr_global_flag = SPR_social_breakdown
					add_ideas = SPR_social_breakdown
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown_2 }
					clr_global_flag = SPR_social_breakdown_2
					add_ideas = SPR_social_breakdown_2
				}
				if = {
					limit = { has_global_flag = SPR_social_breakdown_3 }
					clr_global_flag = SPR_social_breakdown_3
					add_ideas = SPR_social_breakdown_3
				}
				change_tag_from = SPR
				news_event = { id = worldnews.85 days = 1 }
			}
		}
	}
	option = {
		name = sprd.35.b #Never! Invalidate the elections!
		ai_chance = { factor = 50 }
		add_political_power = -200
		add_stability = -0.10
		set_country_flag = SPR_carlists_will_rise
	}
}


########################################
#### Kingdom of Spain, Foreign Policy
########################################

# Carlists flee to Portugal
country_event = {
	id = sprf.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprf.3"}
	title = sprf.3.t
	desc = sprf.3.d
	picture = GFX_report_event_SPR_javier

	fire_only_once = yes

	trigger = {
		tag = POR
		country_exists = SPR
		NOT = { country_exists = CAR }
		NOT = { has_global_flag = spanish_civil_war }
		SPR = { has_country_flag = SPR_javier_arrested }
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = sprf.3.a #Allow them to continue operating from Portugal
		ai_chance = { factor = 85 }
		add_political_power = 50
		reverse_add_opinion_modifier = { target = GER modifier = ITA_hates_govt }
		reverse_add_opinion_modifier = { target = AUS modifier = ITA_hates_govt }
		reverse_add_opinion_modifier = { target = SPR modifier = ITA_outraged }
	}
	option = {
		name = sprf.3.b #Break off diplomatic relations with Spain
		ai_chance = { factor = 10 }
		reverse_add_opinion_modifier = { target = SPR modifier = ITA_outraged }
	}
	option = {
		name = sprf.3.c #Wash our hands of the Carlists
		ai_chance = { factor = 5 }
		add_political_power = -100
	}
}

# CNT-FAI flees to FRANCE
country_event = {
	id = sprf.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprf.4"}
	title = sprf.4.t
	desc = sprf.4.d
	picture = SPA_CNT_refugees

	fire_only_once = yes

	trigger = {
		tag = FRA
		has_socialist_government = yes
		NOT = { country_exists = CNT }
		SPR = { has_country_flag = SPR_cntfai_fled }
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = sprf.4.a #Give them what they ask
		ai_chance = {
			factor = 35
			modifier = {
				factor = 2.5
				has_country_flag = FRA_support_cnt
			}
		}
		set_global_flag = cntfai_support_from_france
		add_political_power = 60
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_supported }
		add_manpower = -20000
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = -500 }
	}
	option = {
		name = sprf.4.b #Refuse, but give them refuge
		ai_chance = {
			factor = 45
			modifier = {
				factor = 0.2
				has_country_flag = FRA_support_cnt
			}
		}
		add_political_power = -20
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_given_refuge }
	}
	option = {
		name = sprf.4.c #Kick them out
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.25
				has_country_flag = FRA_support_cnt
			}
		}
		add_political_power = -100
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_kicked_out }
	}
}

# CNT-FAI flees to RSI
country_event = {
	id = sprf.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprf.5"}
	title = sprf.4.t
	desc = sprf.4.d
	picture = SPA_CNT_refugees

	fire_only_once = yes

	trigger = {
		tag = SRI
		has_socialist_government = yes
		NOT = { country_exists = CNT }
		SPR = { has_country_flag = SPR_cntfai_fled }
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = sprf.4.a
		ai_chance = { factor = 75 }
		set_global_flag = cntfai_support_from_italy
		add_political_power = 60
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_supported }
		add_manpower = -20000
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = -500 }
	}
	option = {
		name = sprf.4.b
		ai_chance = { factor = 20 }
		add_political_power = -20
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_given_refuge }
	}
	option = {
		name = sprf.4.c
		ai_chance = { factor = 5 }
		add_political_power = -100
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_kicked_out }
	}
}

# CNT-FAI flees to ENGLAND
country_event = {
	id = sprf.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprf.6"}
	title = sprf.4.t
	desc = sprf.4.d
	picture = SPA_CNT_refugees

	fire_only_once = yes

	trigger = {
		tag = ENG
		has_socialist_government = yes
		NOT = { country_exists = CNT }
		SPR = { has_country_flag = SPR_cntfai_fled }
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = sprf.4.a
		ai_chance = {
			factor = 5
			modifier = {
				factor = 15
				has_country_flag = ENG_support_cnt
			}
		}
		set_global_flag = cntfai_support_from_england
		add_political_power = 60
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_supported }
		add_manpower = -20000
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = -500 }
	}
	option = {
		name = sprf.4.b
		ai_chance = { factor = 20 }
		add_political_power = -20
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_given_refuge }
	}
	option = {
		name = sprf.4.c
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0.07
				has_country_flag = ENG_support_cnt
			}
		}
		add_political_power = -100
		reverse_add_opinion_modifier = { target = SPR modifier = cntfai_kicked_out }
	}
}


########################################
#### Spanish Civil War
########################################

### UPRISINGS ###

# Carlist Uprising begins
country_event = {
	id = sprc.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.1"}
	title = sprc.1.t
	desc = sprc.1.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1937.05.15
		NOT = { date > 1937.10.1 }
		OR = {
			176 = { is_owned_and_controlled_by = SPR } #Castilla la Vieja
			172 = { is_owned_and_controlled_by = SPR } #Navarra
			174 = { is_owned_and_controlled_by = SPR } #León
			171 = { is_owned_and_controlled_by = SPR } #Galicia
			793 = { is_owned_and_controlled_by = SPR } #Asturias
		}
		has_country_flag = SPR_carlists_will_rise
		NOT = { has_global_flag = SPR_carlists_have_risen }
		NOT = { has_country_flag = election_success }
		NOT = { has_country_flag = SPR_elections }
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		set_global_flag = SPR_carlists_have_risen
		set_country_flag = SPR_cntfai_will_rise
		set_country_flag = Manuel_Fal_Conde_dead
		set_country_flag = Onesimo_Redondo_Ortega_dead
		set_country_flag = Jose_Luis_Arrese_Magra_dead
		every_state = {
			limit = {
				is_core_of = SPR
				NOT = { state = 940 } #Olivenza
			}
			add_claim_by = CAR
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 176 #Castilla la Vieja
					state = 172 #Navarra
					state = 174 #León
					state = 171 #Galicia
					state = 793 #Asturias
				}
			}
			remove_claim_by = CAR
			add_core_of = CAR
			remove_core_of = SPR
			add_claim_by = SPR
			CAR = { transfer_state = PREV }
		}
		if = {
			limit = { has_idea = SPR_black_monday }
			CAR = { add_ideas = CAR_black_monday }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown }
			CAR = { add_ideas = SPR_social_breakdown }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown_2 }
			CAR = { add_ideas = SPR_social_breakdown_2 }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown_3 }
			CAR = { add_ideas = SPR_social_breakdown_3 }
		}
		CAR = { transfer_technology = yes }
	}

	option = {
		name = sprc.1.a #We shall fight them!
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				load_oob = SCW_SPR_reinforce1
			}
		}
		CAR = {
			country_event = { id = sprc.2 days = 7 }
		}
	}
	option = {
		name = sprc.1.b #Long live Javier I! (Play as the Carlists)
		trigger = { is_ai = no }
		hidden_effect = {
			load_oob = SCW_SPR_reinforce1
		}
		CAR = {
			country_event = { id = sprc.2 days = 7 }
			change_tag_from = SPR
		}
	}
}

# Carlist boot event
country_event = {
	id = sprc.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.2"}
	title = sprc.2.t
	desc = sprc.2.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.2.a
		hidden_effect = {
			load_oob = "SCW_CAR"
		}
		if = {
			limit = {
				is_ai = yes
				OR = {
					SPR = { is_ai = no }
					CNT = { is_ai = no }
				}
			}
			hidden_effect = {
				load_oob = SCW_CAR_reinforce1
			}
		}
		set_global_flag = spanish_civil_war
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = ITA }
		add_opinion_modifier = { target = ITA modifier = supports_us_civil_war_2 }
		add_opinion_modifier = { target = AUS modifier = supports_us_civil_war_1 }
		add_opinion_modifier = { target = POR modifier = supports_us_civil_war_1 }
		add_opinion_modifier = { target = GER modifier = against_us_civil_war_1 }
		reverse_add_opinion_modifier = { target = GER modifier = against_carlist_1 }
		if = {
			limit = { owns_state = 176 }
			set_capital = 176
		}
		declare_war_on = {
			target = SPR
			type = annex_everything
		}
		if = {
			limit = {
				country_exists = CNT
				NOT = { has_war_with = CNT }
			}
			declare_war_on = {
				target = CNT
				type = annex_everything
			}
			hidden_effect = {
				random_other_country = {
					limit = {
						NOT = { tag = CNT }
						NOT = { tag = SPR }
					}
					news_event = { id = worldnews.4 days = 1 }
				}
				CAR = {
					country_event = { id = worldtension.4 days = 1 }
				}
			}
		}
		add_ideas = extensive_conscription
		add_ideas = CAR_rally_carlists_idea
	}
}

# CNT-FAI uprising begins
country_event = {
	id = sprc.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.3"}
	title = sprc.3.t
	desc = sprc.3.d
	picture = GFX_report_event_SPR_civwar2

	fire_only_once = yes

	trigger = {
		tag = SPR
		date > 1937.05.15
		NOT = { date > 1937.10.1 }
		OR = {
			165 = { is_owned_and_controlled_by = SPR } #Catalonia
			167 = { is_owned_and_controlled_by = SPR } #Valencia
			166 = { is_owned_and_controlled_by = SPR } #Aragón
			168 = { is_owned_and_controlled_by = SPR } #Murcia
		}
		has_country_flag = SPR_cntfai_will_rise
		NOT = { has_global_flag = SPR_cntfai_have_risen }
		NOT = { has_country_flag = election_success }
		NOT = { has_country_flag = SPR_elections }
	}

	mean_time_to_happen = {
		days = 7
	}

	immediate = {
		set_global_flag = SPR_cntfai_have_risen
		set_country_flag = SPR_carlists_will_rise
		set_country_flag = Juan_Garcia_Oliver_dead
		set_country_flag = Angel_Pestana_dead
		set_country_flag = Juan_Peiro_Belis_dead
		set_country_flag = Joaquin_Ascaso_Budria_dead
		every_state = {
			limit = { is_core_of = SPR }
			add_claim_by = CNT
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				OR = {
					state = 165 #Catalonia
					state = 167 #Valencia
					state = 166 #Aragón
					state = 168 #Murcia
				}
			}
			remove_claim_by = CNT
			add_core_of = CNT
			remove_core_of = SPR
			add_claim_by = SPR
			CNT = { transfer_state = PREV }
		}
		if = {
			limit = { has_idea = SPR_black_monday }
			CNT = { add_ideas = SPR_black_monday }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown }
			CNT = { add_ideas = SPR_social_breakdown }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown_2 }
			CNT = { add_ideas = SPR_social_breakdown_2 }
		}
		if = {
			limit = { has_idea = SPR_social_breakdown_3 }
			CNT = { add_ideas = SPR_social_breakdown_3 }
		}
		CNT = {
			set_cosmetic_tag = CNT_FAI
			transfer_technology = yes
		}
	}

	option = {
		name = sprc.3.a #We shall fight to stop this revolution!
		set_global_flag = cntfai_risen
		if = {
			limit = { is_ai = yes }
			hidden_effect = {
				load_oob = SCW_SPR_reinforce2
			}
		}
		CNT = {
			country_event = { id = sprc.4 days = 7 }
		}
	}
	option = {
		name = sprc.3.b #Viva la Revolución! (Play as the CNT-FAI)
		trigger = { is_ai = no }
		hidden_effect = {
			load_oob = SCW_SPR_reinforce2
		}
		CNT = {
			country_event = { id = sprc.4 days = 7 }
			change_tag_from = SPR
		}
	}
}

# CNT-FAI boot event
country_event = {
	id = sprc.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.4"}
	title = sprc.4.t
	desc = sprc.4.d
	picture = GFX_report_event_SPR_civwar2

	is_triggered_only = yes

	option = {
		name = sprc.4.a
		hidden_effect = {
			load_oob = "SCW_CNT"
		}
		if = {
			limit = {
				is_ai = yes
				OR = {
					SPR = { is_ai = no }
					CAR = { is_ai = no }
				}
			}
			hidden_effect = {
				load_oob = SCW_CNT_reinforce1
			}
		}
		set_global_flag = spanish_civil_war
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 2000 producer = FRA }
		add_opinion_modifier = { target = ITA modifier = against_us_civil_war_2 }
		reverse_add_opinion_modifier = { target = ITA modifier = against_cntfai_2 }
		add_opinion_modifier = { target = GER modifier = against_us_civil_war_1 }
		reverse_add_opinion_modifier = { target = GER modifier = against_cntfai_1 }
		add_opinion_modifier = { target = FRA modifier = supports_us_civil_war_2 }
		add_opinion_modifier = { target = ENG modifier = supports_us_civil_war_1 }
		add_opinion_modifier = { target = SRI modifier = supports_us_civil_war_1 }
		if = {
			limit = { owns_state = 165 }
			set_capital = 165
		}
		declare_war_on = {
			target = SPR
			type = annex_everything
		}
		if = {
			limit = {
				country_exists = CAR
				NOT = { has_war_with = CAR }
			}
			declare_war_on = {
				target = CAR
				type = annex_everything
			}
			hidden_effect = {
				random_other_country = {
					limit = {
						NOT = { tag = CAR }
						NOT = { tag = SPR }
					}
					news_event = { id = worldnews.4 days = 1 }
				}
			}
		}
		add_ideas = extensive_conscription
		add_ideas = CNT_rally_anarchists_idea
	}
}

# We need equipment
country_event = {
	id = sprc.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.5"}
	title = sprc.5.t
	desc = sprc.5.d
	picture = GFX_report_event_SPR_civwar2

	trigger = {
		OR = {
			tag = SPR
			tag = CNT
			tag = CAR
		}
		has_global_flag = spanish_civil_war
		has_political_power > -1000
		NOT = { has_equipment = { infantry_equipment > 250 } }
		NOT = { has_idea = SCW_received_equip }
		NOT = { has_country_flag = SCW_no_equip_thanks }
	}

	mean_time_to_happen = {
		days = 15
		modifier = {
			factor = 0.5
			surrender_progress > 0.5
		}
	}

	immediate = {
		add_timed_idea = { idea = SCW_received_equip days = 30 }
	}

	option = {
		name = sprc.5.a # Yes, we need those guns!
		add_political_power = -100
		if = {
			limit = { tag = CNT }
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1500 producer = FRA }
		}
		if = {
			limit = { tag = CAR }
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1500 producer = ITA }
		}
		if = {
			limit = { tag = SPR }
			add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1500 producer = GER }
		}
	}
	option = {
		name = sprc.5.b # No, let's not mortgage our future just yet
		trigger = { is_ai = no }
		hidden_effect = {
			remove_ideas = SCW_received_equip
			add_timed_idea = { idea = SCW_received_equip days = 90 }
		}
	}
	option = {
		name = sprc.5.c # Don't talk to me about buying guns
		trigger = { is_ai = no }
		set_country_flag = SCW_no_equip_thanks
	}
}

### KINGDOM OF SPAIN EVENTS ###

# Country considers aiding Spain
country_event = {
	id = sprc.101
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.101"}
	title = sprc.101.t
	desc = sprc.101.d
	picture = GFX_report_event_SPR_civwar

	trigger = {
		OR = {
			tag = RUS
			tag = GER
		}
		country_exists = SPR
		has_global_flag = spanish_civil_war
		has_war = no
		NOT = { has_socialist_government = yes }
		NOT = { has_country_flag = SPR_considered_int }
		NOT = { has_country_flag = SPR_intervention }
	}

	mean_time_to_happen = {
		days = 10
	}

	option = {
		name = sprc.101.a
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0.65
				tag = RUS
			}
		}
		set_country_flag = SPR_considered_int
		set_country_flag = SPR_intervention
		add_political_power = -50
		add_manpower = -1000
		send_equipment = { target = SPR type = infantry_equipment amount = 500 }
		add_opinion_modifier = { target = SPR modifier = supports_spain_1 }
		reverse_add_opinion_modifier = { target = CNT modifier = aided_spain }
		reverse_add_opinion_modifier = { target = CAR modifier = aided_spain }
		SPR = { country_event = { id = sprc.102 } }
	}
	option = {
		name = sprc.101.b
		ai_chance = {
			factor = 40
			modifier = {
				factor = 1.5
				tag = RUS
			}
		}
		set_country_flag = SPR_considered_int
	}
}

# Help arrives in Spain
country_event = {
	id = sprc.102
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.102"}
	title = sprc.102.t
	desc = sprc.102.d
	picture = GFX_report_event_SPR_civwar2

	is_triggered_only = yes

	option = {
		name = sprc.102.a
		add_opinion_modifier = { target = FROM modifier = aided_us_civwar }
		add_manpower = 1000
		if = {
			limit = { FROM = { tag = RUS } }
			add_ideas = SPR_advisors_russia
		}
		if = {
			limit = { FROM = { tag = GER } }
			add_ideas = SPR_advisors_germany
			set_country_flag = SPR_help_from_germany
		}
	}
}

# Lessons of war
country_event = {
	id = sprc.103
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.103"}
	title = sprc.103.t
	desc = sprc.103.d
	picture = GFX_report_event_SPR_civwar2

	trigger = {
		has_country_flag = SPR_intervention
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		clr_country_flag = SPR_intervention
		clr_country_flag = SPR_considered_int
	}

	option = {
		name = sprc.103.a
		army_experience = 20
		add_political_power = 100
		if = {
			limit = { tag = RUS }
			SPR = { remove_ideas = SPR_advisors_russia }
		}
		if = {
			limit = { tag = GER }
			SPR = { remove_ideas = SPR_advisors_germany }
		}
		if = {
			limit = { tag = NFA }
			SPR = { remove_ideas = SPR_advisors_natfrance }
		}
	}
}

# Kingdom of Spain victory event (fired by focus)
country_event = {
	id = sprc.120
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.120"}
	title = sprc.120.t
	desc = sprc.120.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.120.a
		add_political_power = 200
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war

		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.86 days = 1 }
			}

			# these are here to clean up those "leftover" provinces
			annex_country = { target = CNT }
			annex_country = { target = CAR }
		}
	}
}

# Main Terror check event
country_event = {
	id = sprc.121
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.121"}

	hidden = yes

	trigger = {
		OR = {
			tag = CAR
			tag = CNT
			tag = SPR
		}
		has_global_flag = spanish_civil_war
		any_state = {
			is_core_of = ROOT
			is_controlled_by = ROOT
			NOT = { is_owned_by = ROOT }
		}
	}

	mean_time_to_happen = {
		days = 22
	}

	immediate = {
		random_list = {
			8 = { country_event = { id = sprc.122 } } #Terror event
			92 = {}
		}
	}
}

# Terror event
country_event = {
	id = sprc.122
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.122"}
	title = sprc.122.t
	desc = sprc.122.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	option = {
		name = sprc.122.a
		add_stability = -0.02
	}
}

# SPR surrender event
country_event = {
	id = sprc.124
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.124"}
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes

	trigger = {
		tag = SPR
		has_war = yes
		is_ai = yes
		surrender_progress > 0.80
		OR = {
			CNT = { controls_state = 41 }
			CAR = { controls_state = 41 }
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		41 = {
			controller = { save_event_target_as = capital_holder }
		}
	}

	option = {
		name = sprc.124.a
		if = {
			limit = { country_exists = CNT }
			CNT = { country_event = sprc.125 }
		}
		if = {
			limit = { country_exists = CAR }
			CAR = { country_event = sprc.125 }
		}
		every_country = {
			clr_country_flag = SPR_intervention
			clr_country_flag = no_SPR_intervention
		}
		every_owned_state = {
			limit = {
				NOT = { state = 41 }
				OR = {
					is_controlled_by = CNT
					is_controlled_by = CAR
				}
			}
			controller = { transfer_state = PREV }
		}
		if = {
			limit = {
				any_owned_state = {
					controller = {
						NOT = { tag = CAR }
						NOT = { tag = CNT }
						NOT = { tag = SPR }
					}
				}
			}
			every_owned_state = {
				limit = { is_controlled_by = SPR }
				event_target:capital_holder = { set_state_controller = PREV }
			}
			event_target:capital_holder = { transfer_state = 41 }
			else = {
				event_target:capital_holder = {
					annex_country = { target = SPR }
					country_event = { id = sprc.130 days = 1 } #cleanup
				}
			}
		}
	}
}

country_event = {
	id = sprc.125
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.125"}
	title = sprc.125.t
	desc = sprc.125.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}

# CAR surrender event
country_event = {
	id = sprc.126
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.126"}
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes

	trigger = {
		tag = CAR
		has_war = yes
		is_ai = yes
		surrender_progress > 0.80
		OR = {
			CNT = { controls_state = 176 }
			SPR = { controls_state = 176 }
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		176 = {
			controller = { save_event_target_as = capital_holder }
		}
	}

	option = {
		name = sprc.124.a
		if = {
			limit = { country_exists = CNT }
			CNT = { country_event = sprc.127 }
		}
		if = {
			limit = { country_exists = SPR }
			SPR = { country_event = sprc.127 }
		}
		every_country = {
			clr_country_flag = CAR_intervention
			clr_country_flag = no_CAR_intervention
		}
		every_owned_state = {
			limit = {
				NOT = { state = 176 }
				OR = {
					is_controlled_by = CNT
					is_controlled_by = SPR
				}
			}
			controller = { transfer_state = PREV }
		}
		if = {
			limit = {
				any_owned_state = {
					controller = {
						NOT = { tag = CAR }
						NOT = { tag = CNT }
						NOT = { tag = SPR }
					}
				}
			}
			every_owned_state = {
				limit = { is_controlled_by = CAR }
				event_target:capital_holder = { set_state_controller = PREV }
			}
			event_target:capital_holder = { transfer_state = 176 }
			else = {
				event_target:capital_holder = {
					annex_country = { target = CAR }
					country_event = { id = sprc.130 days = 1 } #cleanup
				}
			}
		}
	}
}

country_event = {
	id = sprc.127
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.127"}
	title = sprc.127.t
	desc = sprc.127.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}

# CNT surrender event
country_event = {
	id = sprc.128
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.128"}
	title = sprc.124.t
	desc = sprc.124.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes

	trigger = {
		tag = CNT
		has_war = yes
		is_ai = yes
		surrender_progress > 0.80
		OR = {
			CAR = { controls_state = 165 }
			SPR = { controls_state = 165 }
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	immediate = {
		165 = {
			controller = { save_event_target_as = capital_holder }
		}
	}

	option = {
		name = sprc.124.a
		if = {
			limit = { country_exists = CAR }
			CAR = { country_event = sprc.129 }
		}
		if = {
			limit = { country_exists = SPR }
			SPR = { country_event = sprc.129 }
		}
		every_country = {
			clr_country_flag = CNT_intervention
			clr_country_flag = no_CNT_intervention
		}
		every_owned_state = {
			limit = {
				NOT = { state = 165 }
				OR = {
					is_controlled_by = CAR
					is_controlled_by = SPR
				}
			}
			controller = { transfer_state = PREV }
		}
		if = {
			limit = {
				any_owned_state = {
					controller = {
						NOT = { tag = CAR }
						NOT = { tag = CNT }
						NOT = { tag = SPR }
					}
				}
			}
			every_owned_state = {
				limit = { is_controlled_by = CNT }
				event_target:capital_holder = { set_state_controller = PREV }
			}
			event_target:capital_holder = { transfer_state = 165 }
			else = {
				event_target:capital_holder = {
					annex_country = { target = CNT }
					country_event = { id = sprc.130 days = 1 } #cleanup
				}
			}
		}
	}
}

country_event = {
	id = sprc.129
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.129"}
	title = sprc.129.t
	desc = sprc.129.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.125.a
		add_political_power = 100
		add_stability = 0.05
	}
}

country_event = {
	id = sprc.130
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.130"}

	hidden = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { FROM = { exists = no } }
			annex_country = { target = FROM }
		}
	}
}


### CNT-FAI EVENTS ###

# Country considers aiding the CNT
country_event = {
	id = sprc.204
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.204"}
	title = sprc.204.t
	desc = sprc.204.d
	picture = GFX_report_event_SPR_civwar

	trigger = {
		OR = {
			tag = ENG
			tag = SRI
			tag = SOV
			tag = MEX
			tag = BRA
		}
		country_exists = CNT
		has_global_flag = spanish_civil_war
		has_war = no
		has_socialist_government = yes
		NOT = { has_country_flag = CNT_considered_int }
		NOT = { has_country_flag = CNT_intervention }
	}

	mean_time_to_happen = {
		days = 10
	}

	option = {
		name = sprc.204.a
		ai_chance = {
			factor = 40
			modifier = {
				factor = 1.5
				OR = {
					tag = FRA
					tag = SRI
				}
			}
		}
		set_country_flag = CNT_considered_int
		set_country_flag = CNT_intervention
		add_political_power = -50
		add_manpower = -1000
		send_equipment = { target = CNT type = infantry_equipment amount = 500 }
		add_opinion_modifier = { target = CNT modifier = supports_cntfai_1 }
		reverse_add_opinion_modifier = { target = SPR modifier = aided_cntfai }
		reverse_add_opinion_modifier = { target = CAR modifier = aided_cntfai }
		CNT = { country_event = { id = sprc.205 } }
	}
	option = {
		name = sprc.204.b
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0.65
				OR = {
					tag = FRA
					tag = SRI
				}
			}
		}
		set_country_flag = CNT_considered_int
	}
}

# Aid arrives at CNT
country_event = {
	id = sprc.205
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.205"}
	title = sprc.205.t
	desc = sprc.205.d
	picture = GFX_report_event_SPR_civwar2

	is_triggered_only = yes

	option = {
		name = sprc.205.a
		add_opinion_modifier = { target = FROM modifier = aided_us_civwar }
		add_manpower = 1000
		if = {
			limit = { FROM = { tag = ENG } }
			add_ideas = CNT_advisors_england
		}
		if = {
			limit = { FROM = { tag = SOV } }
			add_ideas = CNT_advisors_soviet
		}
		if = {
			limit = { FROM = { tag = FRA } }
			add_ideas = CNT_advisors_france
		}
		if = {
			limit = { FROM = { tag = SRI } }
			add_ideas = CNT_advisors_italysoc
		}
	}
}

# Lessons of War
country_event = {
	id = sprc.206
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.206"}
	title = sprc.206.t
	desc = sprc.206.d
	picture = GFX_report_event_SPR_civwar

	trigger = {
		has_country_flag = CNT_intervention
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		clr_country_flag = CNT_intervention
		clr_country_flag = CNT_considered_int
	}

	option = {
		name = sprc.206.a
		army_experience = 100
		add_political_power = 100
		if = {
			limit = { tag = ENG }
			CNT = { remove_ideas = CNT_advisors_england }
		}
		if = {
			limit = { tag = SOV }
			CNT = { remove_ideas = CNT_advisors_soviet }
		}
		if = {
			limit = { tag = FRA }
			CNT = { remove_ideas = CNT_advisors_france }
		}
		if = {
			limit = { tag = SRI }
			CNT = { remove_ideas = CNT_advisors_italysoc }
		}
	}
}

# Mine Workers rise up
country_event = {
	id = sprc.207
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.207"}
	title = sprc.207.t
	desc = sprc.207.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CNT
		controls_state = 165
		has_war_with = SPR
		SPR = { has_country_flag = SPR_cntfai_plan_south }
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 15
	}

	option = {
		name = sprc.207.a
		custom_effect_tooltip = SPR_workers_rise
		hidden_effect = { load_oob = SCW_CNT_workers }
	}
}

# Foreign units return from France
country_event = {
	id = sprc.208
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.208"}
	title = sprc.208.t
	desc = sprc.208.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CNT
		controls_state = 165
		has_war_with = SPR
		has_global_flag = cntfai_support_from_france
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprc.207.a
		clr_global_flag = cntfai_support_from_france
		custom_effect_tooltip = SPR_foreign_unit_arrives
		hidden_effect = { load_oob = SCW_CNT_foreign }
	}
}

# Foreign units return from SRI
country_event = {
	id = sprc.209
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.209"}
	title = sprc.209.t
	desc = sprc.209.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CNT
		controls_state = 165
		has_war_with = SPR
		has_global_flag = cntfai_support_from_italy
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprc.207.a
		clr_global_flag = cntfai_support_from_italy
		custom_effect_tooltip = SPR_foreign_unit_arrives
		hidden_effect = { load_oob = SCW_CNT_foreign }
	}
}

# Foreign units return from Britain
country_event = {
	id = sprc.210
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.210"}
	title = sprc.210.t
	desc = sprc.210.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CNT
		controls_state = 165
		has_war_with = SPR
		has_global_flag = cntfai_support_from_england
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 40
	}

	option = {
		name = sprc.207.a
		clr_global_flag = cntfai_support_from_england
		custom_effect_tooltip = SPR_foreign_unit_arrives
		hidden_effect = { load_oob = SCW_CNT_foreign }
	}
}

# Madrid is taken by CNT
country_event = {
	id = sprc.211
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.211"}
	title = sprc.211.t
	desc = sprc.211.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes

	trigger = {
		tag = CNT
		controls_state = 41 #Madrid
		NOT = { owns_state = 41 }
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = sprc.211.a #We must scavenge what we can!
		ai_chance = { factor = 65 }
		add_political_power = -50
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SPR }
		41 = {
			damage_building = { type = industrial_complex damage = 1 }
			damage_building = { type = arms_factory damage = 1 }
		}
	}
	option = {
		name = sprc.211.b #Leave the city as it stands
		ai_chance = { factor = 35 }
		add_political_power = 50
	}
}

# CNT victory event
country_event = {
	id = sprc.220
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.220"}
	title = sprc.220.t
	desc = sprc.220.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.220.a
		drop_cosmetic_tag = yes
		add_political_power = 200
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war

		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.87 days = 1 }
			}

			# these are here to clean up those "leftover" provinces
			annex_country = { target = SPR }
			annex_country = { target = CAR }
		}
	}
}

# CNT considers moving the capital to Madrid
country_event = {
	id = sprc.221
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.221"}
	title = sprc.221.t
	desc = sprc.221.d
	picture = diplomacy4

	fire_only_once = yes

	trigger = {
		tag = CNT
		has_country_flag = aftermath_of_the_civil_war
		owns_state = 41
		controls_state = 41
	}

	mean_time_to_happen = { days = 5 }

	option = {
		name = sprc.221.a
		ai_chance = { factor = 80 }
		add_political_power = 20
		set_capital = 41
	}
	option = {
		name = sprc.221.b
		ai_chance = { factor = 20 }
		add_political_power = 20
	}
}

# Maintenance event - in case enemy left with one state
country_event = {
	id = sprc.222
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.222"}

	hidden = yes

	trigger = {
		OR = {
			tag = CNT
			tag = CAR
			tag = SPR
		}
		has_global_flag = spanish_civil_war
		num_of_controlled_states < 2
		has_war = no
		OR = {
			CNT = {
				has_war = no
				num_of_controlled_states > 1
			}
			CAR = {
				has_war = no
				num_of_controlled_states > 1
			}
			SPR = {
				has_war = no
				num_of_controlled_states > 1
			}
		}
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		if = {
			limit = { is_ai = yes }
			random_other_country = {
				limit = {
					has_war = no
					NOT = { tag = ROOT }
					OR = {
						tag = CNT
						tag = CAR
						tag = SPR
					}
					num_of_controlled_states > 1
				}
				annex_country = { target = ROOT }
			}
			else = {
				random_other_country = {
					limit = {
						is_ai = no
						has_war = no
						NOT = { tag = ROOT }
						OR = {
							tag = CNT
							tag = CAR
							tag = SPR
						}
						num_of_controlled_states > 1
					}
					declare_war_on = {
						target = ROOT
						type = annex_everything
					}
				}
			}
		}
	}
}

# Maintenance event - if peace before war is over
country_event = {
	id = sprc.223
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.223"}

	hidden = yes

	trigger = {
		OR = {
			tag = CNT
			tag = CAR
			tag = SPR
		}
		is_ai = yes
		has_war = no
		has_global_flag = spanish_civil_war
		num_of_controlled_states > 1
		OR = {
			AND = {
				NOT = { tag = CNT }
				CNT = {
					has_war = no
					num_of_controlled_states > 1
				}
			}
			AND = {
				NOT = { tag = CAR }
				CAR = {
					has_war = no
					num_of_controlled_states > 1
				}
			}
			AND = {
				NOT = { tag = SPR }
				SPR = {
					has_war = no
					num_of_controlled_states > 1
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		random_other_country = {
			limit = {
				has_war = no
				NOT = { tag = ROOT }
				num_of_controlled_states > 1
				OR = {
					tag = CNT
					tag = CAR
					tag = SPR
				}
			}
			ROOT = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
	}
}

### PORTUAL REVOLUTION EVENTS

# Mittelafrika considers seizing Angola
country_event = {
	id = sprc.247
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.247"}
	title = sprc.247.t
	desc = sprc.247.d
	picture = towar

	fire_only_once = yes

	trigger = {
		OR = {
			tag = MAF
			tag = SAF
		}
		is_subject = no
		has_war = no
		any_owned_state = { any_neighbor_state = { state = 540 } }
		POR = {
			owns_state = 540 #Angola
			controls_state = 540
			has_war_with = CNT
			NOT = { is_in_faction_with = ROOT }
			surrender_progress > 0.50
		}
		NOT = { has_country_flag = CNT_considered_ang }
	}

	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		set_country_flag = CNT_considered_ang
	}

	option = {
		name = sprc.247.a #We must get it!
		ai_chance = { factor = 60 }
		transfer_state = 540
		if = {
			limit = { POR = { owns_state = 705 } }
			transfer_state = 705 #Sao Tome
		}
		POR = { country_event = { id = sprc.248 } }
	}
	option = {
		name = sprc.247.b #Leave it alone
		ai_chance = { factor = 40 }
	}
}

# Mittelafrika has seized Angola
country_event = {
	id = sprc.248
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.248"}
	title = sprc.248.t
	desc = sprc.248.d
	picture = towar

	is_triggered_only = yes

	option = {
		name = sprc.248.a
		add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
		add_state_claim = 540
		CNT = {
			add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
			add_state_claim = 540
		}
	}
}

# Mittelafrika considers seizing Mozambique
country_event = {
	id = sprc.249
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.249"}
	title = sprc.249.t
	desc = sprc.249.d
	picture = towar

	trigger = {
		OR = {
			tag = MAF
			tag = SAF
		}
		is_subject = no
		has_war = no
		any_owned_state = { any_neighbor_state = { state = 544 } }
		POR = {
			owns_state = 544 #Mozambique
			controls_state = 544
			has_war_with = CNT
			NOT = { is_in_faction_with = ROOT }
			surrender_progress > 0.50
		}
		NOT = { has_country_flag = CNT_considered_moz }
	}

	mean_time_to_happen = {
		days = 10
	}

	immediate = {
		set_country_flag = CNT_considered_moz
	}

	option = {
		name = sprc.247.a #We must get it!
		ai_chance = { factor = 60 }
		transfer_state = 544
		POR = { country_event = { id = sprc.250 } }
	}
	option = {
		name = sprc.247.b #Leave it alone
		ai_chance = { factor = 40 }
	}
}

# Mittelafrika has seized Mozambique
country_event = {
	id = sprc.250
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.250"}
	title = sprc.250.t
	desc = sprc.250.d
	picture = towar

	is_triggered_only = yes

	option = {
		name = sprc.248.a
		add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
		add_state_claim = 544
		CNT = {
			add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
			add_state_claim = 544
		}
	}
}

# Macao is seized by a neighbor
country_event = {
	id = sprc.251
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.251"}
	title = sprc.251.t
	desc = sprc.251.d
	picture = towar

	fire_only_once = yes

	trigger = {
		OR = {
			tag = LEC
			tag = QIE
			tag = SQI
			tag = FNG
			tag = GER
			tag = AOG
		}
		NOT = { country_exists = POR }
		is_subject = no
		has_war = no
		NOT = { has_socialist_government = yes }
		OR = {
			tag = LEC
			any_owned_state = { any_neighbor_state = { state = 729 } }
		}
		CNT = {
			owns_state = 729 #Macau
			controls_state = 729
			NOT = { is_in_faction_with = ROOT }
		}
	}

	mean_time_to_happen = {
		days = 7
		modifier = {
			factor = 0.35
			tag = LEC
		}
	}

	option = {
		name = sprc.251.a #Welcome them
		transfer_state = 729
		CNT = { country_event = { id = sprc.252 } }
	}
	option = {
		name = sprc.251.b #No, we don't want this kind of trouble
		trigger = { is_ai = no }
	}
}

country_event = {
	id = sprc.252
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.252"}
	title = sprc.252.t
	desc = sprc.252.d
	picture = towar

	is_triggered_only = yes

	option = {
		name = sprc.252.a
		add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
		add_state_claim = 729
	}
}

# East Timor is seized by a neighbor
country_event = {
	id = sprc.253
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.253"}
	title = sprc.253.t
	desc = sprc.253.d
	picture = towar

	fire_only_once = yes

	trigger = {
		OR = {
			AND = {
				tag = INS
				1017 = { is_owned_and_controlled_by = INS }
			}
			AND = {
				tag = DEI
				1017 = { is_owned_and_controlled_by = DEI }
			}
			AND = {
				tag = HOL
				1017 = { is_owned_and_controlled_by = HOL }
			}
			AND = {
				tag = GEA
				any_owned_state = { is_on_continent = asia }
			}
			tag = AST
		}
		NOT = { country_exists = POR }
		is_subject = no
		has_war = no
		NOT = { has_socialist_government = yes }
		CNT = {
			owns_state = 721 #East Timor
			controls_state = 721
			NOT = { is_in_faction_with = ROOT }
		}
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = sprc.251.a #Welcome them
		transfer_state = 721
		CNT = { country_event = { id = sprc.254 } }
	}
	option = {
		name = sprc.251.b #No, we don't want this kind of trouble
		trigger = { is_ai = no }
	}
}

country_event = {
	id = sprc.254
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.254"}
	title = sprc.254.t
	desc = sprc.254.d
	picture = towar

	is_triggered_only = yes

	option = {
		name = sprc.252.a
		add_opinion_modifier = { target = FROM modifier = ITA_hates_govt }
		add_state_claim = 721
	}
}


### CARLIST EVENTS ###

# Country considers sending aid to the Carlists
country_event = {
	id = sprc.301
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.301"}
	title = sprc.301.t
	desc = {# not canada
		text = sprc.301.d.not_canada
		trigger = { NOT = { tag = CAN } }
	}
	desc = {# is canada
		text = sprc.301.d.canada
		trigger = { tag = CAN }
	}
	picture = GFX_report_event_SPR_civwar

	trigger = {
		OR = {
			tag = SIC
			tag = CAN
			tag = GBR
			tag = POR
			tag = AUS
			tag = IRE
		}
		country_exists = CAR
		has_global_flag = spanish_civil_war
		has_war = no
		NOT = { has_socialist_government = yes }
		NOT = { has_country_flag = CAR_considered_int }
		NOT = { has_country_flag = CAR_intervention }
	}

	mean_time_to_happen = {
		days = 10
	}

	option = {
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0.65
				NOT = {
					tag = SIC
					tag = POR
					tag = CAN
					tag = NFA
					tag = GBR
					tag = POR
					tag = AUS
				}
			}
		}
		name = sprc.301.a
		set_country_flag = CAR_considered_int
		set_country_flag = CAR_intervention
		add_political_power = -50
		add_manpower = -1000
		send_equipment = { target = CAR type = infantry_equipment amount = 500 }
		add_opinion_modifier = { target = CAR modifier = supports_carlist_1 }
		reverse_add_opinion_modifier = { target = SPR modifier = aided_carlist }
		reverse_add_opinion_modifier = { target = CNT modifier = aided_carlist }
		CAR = { country_event = { id = sprc.302 } }
	}
	option = {
		name = sprc.301.b
		ai_chance = {
			factor = 60
			modifier = {
				factor = 3
				has_cosmetic_tag = ITA_republic
			}
			modifier = {
				factor = 1.5
				NOT = {
					tag = ITA
					tag = POR
					tag = AUS
				}
			}
		}
		set_country_flag = CAR_considered_int
	}
}

# Aid arrives at the Carlists
country_event = {
	id = sprc.302
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.302"}
	title = sprc.302.t
	desc = sprc.302.d
	picture = GFX_report_event_SPR_civwar2

	is_triggered_only = yes

	option = {
		name = sprc.302.a
		add_opinion_modifier = { target = FROM modifier = aided_us_civwar }
		add_manpower = 1000
		if = {
			limit = { FROM = { tag = ITA } }
			add_ideas = CAR_advisors_italianfed
		}
		if = {
			limit = { FROM = { tag = POR } }
			add_ideas = CAR_advisors_portugal
		}
		if = {
			limit = { FROM = { tag = AUS } }
			add_ideas = CAR_advisors_austria
		}
	}
}

# Lessons of war
country_event = {
	id = sprc.303
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.303"}
	title = sprc.303.t
	desc = sprc.303.d
	picture = GFX_report_event_SPR_civwar

	trigger = {
		has_country_flag = CAR_intervention
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		clr_country_flag = CAR_intervention
		clr_country_flag = CAR_considered_int
	}

	option = {
		name = sprc.303.a
		army_experience = 100
		add_political_power = 20
		if = {
			limit = { tag = ITA }
			CAR = { remove_ideas = CAR_advisors_italianfed }
		}
		if = {
			limit = { tag = POR }
			CAR = { remove_ideas = CAR_advisors_portugal }
		}
		if = {
			limit = { tag = AUS }
			CAR = { remove_ideas = CAR_advisors_austria }
		}
		if = {
			limit = { tag = NFA }
			CAR = { remove_ideas = SPR_advisors_natfrance }
		}
	}
}

# Portuguese supply unit
country_event = {
	id = sprc.304
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.304"}
	title = sprc.304.t
	desc = sprc.304.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CAR
		controls_state = 176
		has_war_with = SPR
		has_idea = SPR_portuguese_economic_cooperation
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 20
	}

	option = {
		name = sprc.207.a
		custom_effect_tooltip = SPR_supplied_unit_arrives
		hidden_effect = { load_oob = SCW_CAR_supplies }
	}
}

# Italian supply unit
country_event = {
	id = sprc.305
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.305"}
	title = sprc.305.t
	desc = sprc.305.d
	picture = GFX_report_event_SPR_civwar

	fire_only_once = yes

	trigger = {
		tag = CAR
		controls_state = 176
		has_war_with = SPR
		has_idea = SPR_italian_economic_cooperation
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprc.207.a
		custom_effect_tooltip = SPR_supplied_unit_arrives
		hidden_effect = { load_oob = SCW_CAR_supplies }
	}
}

### ASSASSINATION EVENT CHAIN

# Assassination plot begins
country_event = {
	id = sprc.306
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.306"}
	title = sprc.306.t
	desc = sprc.306.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = { name = "Alfonso XIII de Bourbon" }
		}
	}

	option = {
		name = sprc.306.a
		random_list = {
			75 = {
				country_event = { id = sprc.309 days = 20 } #success
			}
			25 = {
				country_event = { id = sprc.307 days = 20 } #fails
			}
		}
	}
}

# Assassination plot fails
country_event = {
	id = sprc.307
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.307"}
	title = sprc.307.t
	desc = sprc.307.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = { name = "Alfonso XIII de Bourbon" }
		}
	}

	option = {
		name = sprc.307.a
		add_political_power = -100
		hidden_effect = {
			SPR = { country_event = { id = sprc.308 } }
		}
	}
}

# Inform Kingdom of Spain that plot failed
country_event = {
	id = sprc.308
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.308"}
	title = sprc.308.t
	desc = sprc.308.d
	picture = GFX_report_event_SPR_civwar3

	is_triggered_only = yes

	option = {
		name = sprc.308.a
		add_political_power = 50
	}
}

# Assassination plot succeeds
country_event = {
	id = sprc.309
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.309"}
	title = sprc.309.t
	desc = sprc.309.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	trigger = {
		has_war_with = SPR
		SPR = {
			has_country_leader = { name = "Alfonso XIII de Bourbon" }
		}
	}

	option = {
		name = sprc.309.a
		add_political_power = 100
		hidden_effect = {
			SPR = { country_event = { id = sprc.310 } }
		}
	}
}

# Inform Kingdom of Spain that plot succeeded
country_event = {
	id = sprc.310
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.310"}
	title = sprc.310.t
	desc = sprc.310.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	trigger = {
		has_war_with = CAR
		has_country_leader = { name = "Alfonso XIII de Bourbon" }
	}

	immediate = {
		set_country_flag = SPR_Juan_III_killed
	}

	option = {
		name = sprc.310.a #Miguel Ferrer takes control
		trigger = { NOT = { has_country_flag = SPR_javier_praised } }
		ai_chance = {
			factor = 30
		}
		add_timed_idea = { idea = SPR_regent_killed days = 90 }
		add_stability = -0.10
		create_country_leader = {
			name = "Miguel Cabanellas Ferrer"
			desc = "POLITICS_MIGUEL_FERRER_DESC"
			picture = "Portrait_SPR_Miguel_Cabanellas_Ferrer.tga"
			expire = "1965.1.1"
			ideology = paternal_autocrat_subtype
			traits = {}
		}
		set_politics = { ruling_party = paternal_autocrat }
		add_popularity = { ideology = paternal_autocrat popularity = 0.1 }
		hidden_effect = {
			CNT = { country_event = { id = sprc.311 days = 1 } }
		}
	}
	option = {
		name = sprc.310.b #Franco Bahamonde becomes the regent
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.65
				has_country_flag = SPR_javier_praised
			}
		}
		add_timed_idea = { idea = SPR_regent_killed days = 90 }
		add_stability = -0.10
		create_country_leader = {
			name = "Francisco Franco Bahamonde"
			desc = "POLITICS_FRANSISCO_FRANCO_DESC"
			picture = "Portrait_SPR_Franco_Bahamonde.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		hidden_effect = {
			CNT = { country_event = { id = sprc.311 days = 1 } }
		}
	}
	option = {
		name = sprc.310.c #J.M. Gil-Robles Quiñones retains the government
		ai_chance = {
			factor = 40
		}
		add_timed_idea = { idea = SPR_regent_killed days = 90 }
		add_stability = -0.10
		create_country_leader = {
			name = "J.M. Gil-Robles Quiñones"
			desc = "POLITICS_GIL_ROBLES_QUINONES_DESC"
			picture = "Portrait_SPR_J_M_Gil_Robles_Quinones.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
			traits = {}
		}
		hidden_effect = {
			CNT = { country_event = { id = sprc.311 days = 1 } }
		}
	}
}

# CNT informed of the regent's assassination
country_event = {
	id = sprc.311
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.311"}
	title = sprc.311.t
	desc = sprc.311.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	option = {
		name = sprc.311.a
	}
}

# Madrid is taken by Carlists
country_event = {
	id = sprc.317
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.317"}
	title = sprc.211.t
	desc = sprc.211.d
	picture = GFX_report_event_SPR_civwar3

	fire_only_once = yes

	trigger = {
		tag = CAR
		controls_state = 41 #Madrid
		NOT = { owns_state = 41 }
		has_global_flag = spanish_civil_war
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = sprc.211.a #We must scavenge what we can!
		ai_chance = { factor = 65 }
		add_political_power = -50
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 1000 producer = SPR }
		41 = {
			damage_building = { type = industrial_complex damage = 1 }
			damage_building = { type = arms_factory damage = 1 }
		}
	}
	option = {
		name = sprc.211.b #Leave the city as it stands
		ai_chance = { factor = 35 }
		add_political_power = 50
	}
}

# Carlist victory event (triggered by focus)
country_event = {
	id = sprc.320
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.320"}
	title = sprc.320.t
	desc = sprc.320.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.320.a
		add_political_power = 200
		clr_global_flag = spanish_civil_war
		set_country_flag = aftermath_of_the_civil_war
		set_cosmetic_tag = CAR_kingdom
		hidden_effect = {
			random_other_country = {
				news_event = { id = worldnews.88 days = 1 }
			}

			# these are here to clean up those "leftover" provinces
			annex_country = { target = CNT }
			annex_country = { target = SPR }
		}
	}
}

# CAR considers moving the capital to Madrid
country_event = {
	id = sprc.321
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.321"}
	title = sprc.321.t
	desc = sprc.321.d
	picture = diplomacy4

	fire_only_once = yes

	trigger = {
		tag = CAR
		has_country_flag = aftermath_of_the_civil_war
		owns_state = 41 #Madrid
		controls_state = 41
	}

	mean_time_to_happen = { days = 5 }

	option = {
		name = sprc.321.a
		ai_chance = { factor = 95 }
		add_political_power = 20
		set_capital = 41
	}
	option = {
		name = sprc.321.b
		ai_chance = { factor = 5 }
		add_political_power = 20
	}
}

# The Troubles Continue
country_event = {
	id = sprc.322
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.322"}
	title = sprc.322.t
	desc = sprc.322.d
	picture = GFX_report_event_generic_ruins

	fire_only_once = yes

	trigger = {
		OR = {
			tag = CAR
			tag = CNT
			tag = SPR
		}
		has_country_flag = aftermath_of_the_civil_war
		NOT = { has_global_flag = spanish_civil_war }
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = sprc.322.a
		add_stability = -0.20
		hidden_effect = {
			country_event = { id = sprc.323 days = 90 }
		}
	}
}

# Recovery event #1
country_event = {
	id = sprc.323
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.323"}
	title = sprc.323.t
	desc = sprc.323.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	option = {
		name = sprc.322.a
		if = {
			limit = { has_political_power < -500 }
			add_political_power = 200
			add_stability = 0.10
		}
		if = {
			limit = {
				has_political_power > -501
				has_political_power < -100
			}
			add_political_power = 100
			add_stability = 0.05
		}
		if = {
			limit = { has_political_power > -101 }
			add_political_power = 50
		}
		hidden_effect = {
			set_country_flag = spanish_postwar
			country_event = { id = sprc.324 days = 90 }
		}
	}
}

# Recovery event #2
country_event = {
	id = sprc.324
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.324"}
	title = sprc.323.t
	desc = sprc.323.d
	picture = GFX_report_event_SPR_civwar

	is_triggered_only = yes

	trigger = {
		has_political_power < 0
	}

	option = {
		name = sprc.322.a
		if = {
			limit = { has_political_power < -500 }
			add_political_power = 200
			add_stability = 0.10
		}
		if = {
			limit = {
				has_political_power > -501
				has_political_power < -100
			}
			add_political_power = 100
			add_stability = 0.05
		}
		if = {
			limit = { has_political_power > -101 }
			add_political_power = 50
		}
		hidden_effect = {
			country_event = { id = sprc.324 days = 90 }
		}
	}
}

# Consolidating Spain
country_event = {
	id = sprc.326
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.326"}

	hidden = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { tag = CAR }
			create_country_leader = {
				name = "José Díaz Ramos"
				picture = "Portrait_Spain_Jose_Diaz.tga"
				expire = "1965.1.1"
				ideology = syndicalist_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Dolores Ibáurri Gómez"
				picture = "Portrait_CNT_Dolores_Ibaurri_Gomez.tga"
				expire = "1965.1.1"
				ideology = totalist_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Niceto Alcalá-Zamora"
				picture = "Portrait_CNT_Niceto_Alcala_Zamora.tga"
				expire = "1965.1.1"
				ideology = social_conservative_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Manuel Azaña Díaz"
				picture = "Portrait_CNT_Manuel_Azana_Diaz.tga"
				expire = "1965.1.1"
				ideology = social_liberal_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Camilo Alonso Vega"
				picture = "Portrait_SPR_Alonso_Vega.tga"
				expire = "1965.1.1"
				ideology = national_populist_subtype
				traits = {}
			}
			SPR = {
				every_unit_leader = {
					limit = {
						OR = {
							has_id = 301 #Franco
							has_id = 303 #Cabanillas
						}
					}
					set_nationality = CAR
				}
			}
		}
		if = {
			limit = { tag = CNT }
			create_country_leader = {
				name = "Jaime I"
				picture = "Portrait_SPR_Jaime_I.tga"
				expire = "1965.1.1"
				ideology = authoritarian_democrat_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Francisco Franco Bahamonde"
				picture = "Portrait_SPR_Franco_Bahamonde.tga"
				expire = "1965.1.1"
				ideology = paternal_autocrat_subtype
				traits = {}
			}
			create_country_leader = {
				name = "José Díaz Ramos"
				picture = "Portrait_Spain_Jose_Diaz.tga"
				expire = "1965.1.1"
				ideology = syndicalist_subtype
				traits = {}
			}
			CAR = {
				every_unit_leader = {
					limit = { has_id = 313 } #de Llano
					set_nationality = CNT
				}
			}
			SPR = {
				every_unit_leader = {
					limit = { has_id = 303 } #Cabanillas
					set_nationality = CNT
				}
			}
		}
		if = {
			limit = { tag = SPR }
			create_country_leader = {
				name = "Julián Besteiro Fernández"
				picture = "Portrait_CNT_Julian_Besteiro_Fernandez.tga"
				expire = "1965.1.1"
				ideology = radical_socialist_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Dolores Ibáurri Gómez"
				picture = "Portrait_CNT_Dolores_Ibaurri_Gomez.tga"
				expire = "1965.1.1"
				ideology = totalist_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Ramón Otero Pedrayo"
				picture = "Portrait_CAR_Ramon_Otero_Pedrayo.tga"
				expire = "1965.1.1"
				ideology = market_liberal_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Manuel Azaña Díaz"
				picture = "Portrait_CNT_Manuel_Azana_Diaz.tga"
				expire = "1965.1.1"
				ideology = social_liberal_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Augusto Barcia Trelles"
				picture = "Portrait_CNT_Augusto_Barcia_Trelles.tga"
				expire = "1965.1.1"
				ideology = social_democrat_subtype
				traits = {}
			}
			create_country_leader = {
				name = "Niceto Alcalá-Zamora"
				picture = "Portrait_CNT_Niceto_Alcala_Zamora.tga"
				expire = "1965.1.1"
				ideology = social_conservative_subtype
				traits = {}
			}
			CNT = {
				every_unit_leader = {
					limit = { has_id = 319 } #Batet
					set_nationality = SPR
				}
			}
			CAR = {
				every_unit_leader = {
					limit = { has_id = 313 } #de Llano
					set_nationality = SPR
				}
			}
		}
	}
}

# Seizing Equatorial Guinea
country_event = {
	id = sprc.327
	immediate = {log = "[GetDateText]: [Root.GetName]: event sprc.327"}
	title = sprc.327.t
	desc = sprc.327.d
	picture = GFX_report_event_generic_ruins

	fire_only_once = yes

	trigger = {
		OR = {
			tag = MAF
			tag = GER
		}
		927 = { is_owned_and_controlled_by = ROOT } #Kamerun
		297 = { is_controlled_by = CNT }
		not_has_socialist_government = yes
	}

	mean_time_to_happen = {
		days = 3
	}

	option = {
		name = sprc.327.a
		add_political_power = 20
		transfer_state = 297
		297 = {
			add_claim_by = CNT
			if = {
				limit = { country_exists = SPR }
				add_claim_by = SPR
			}
			if = {
				limit = { country_exists = CAR }
				add_claim_by = CAR
			}
		}
	}
	option = {
		name = sprc.327.b
		trigger = { is_ai = no }
		add_political_power = -20
	}
}

